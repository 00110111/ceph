set-cdn-repo:
    rhbuild: '2.0'
overrides:
  ceph-ansible:
    vars:
      ceph_stable: true
      ceph_origin: distro
      ceph_stable_rh_storage: true
      journal_collocation: true
      journal_size: 1024
      osd_auto_discovery: false
      ceph_test: true
roles:
- - mon.a
  - mds.a
  - osd.0
  - osd.1
  - osd.2
- - mon.b
  - osd.3
  - osd.4
  - osd.5
- - mon.c
- - client.0
- - client.1
- - client.2
- - client.3
tasks:
- ssh-keys:
- ceph-ansible:
    rhbuild: '2.0'
- install.ship_utilities:
- parallel:
  - ceph-deploy.upgrade_simple:
      latest: true
      roles:
       - mon.a
       - mon.b
  - rbd_fio:
       client.0:
         fio-io-size: 90%
         formats: [2]
         features: [[layering],[layering,exclusive-lock,object-map]]
         io-engine: sync
         rw: randrw
         runtime: 900
  - workunit:
      branch: jewel
      clients:
        client.0:
        - cls
  - print: '**** done cls workload'
  - workunit:
      branch: jewel
      clients:
        client.1:
        - rados/load-gen-big.sh
  - print: '**** done rados/load-gen-big.sh workload'
  - workunit:
      branch: jewel
      clients:
        client.2:
        - rbd/test_librbd.sh
  - print: '**** done rbd/test_librbd.sh workload'
  - workunit:
      branch: jewel
      clients:
        client.3:
        - rbd/test_librbd_python.sh
  - print: '**** done rbd/test_librbd_python.sh workload'
